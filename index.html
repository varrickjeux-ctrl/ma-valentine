<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RÃ©ponds-moi vite !</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Creepster&family=Poppins:wght@900&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff4d6d; --blood: #b30000; }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            overflow: hidden; font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #fff0f3 0%, #ffccd5 100%); 
            display: flex; justify-content: center; align-items: center; 
        }

        /* PÃ©tales & Sang */
        .drop { position: fixed; top: -50px; pointer-events: none; z-index: 1; }
        .petal { background: var(--pink); border-radius: 150% 0 150% 0; }
        .blood { background: var(--blood); width: 5px !important; border-radius: 0 0 50% 50%; box-shadow: 0 0 5px red; }

        /* Design Encart Glassmorphism */
        #container { 
            position: relative; z-index: 100; 
            background: rgba(255, 255, 255, 0.4); 
            padding: 50px; border-radius: 40px; 
            backdrop-filter: blur(15px);
            box-shadow: 0 25px 45px rgba(0,0,0,0.1); 
            text-align: center; border: 2px solid rgba(255,255,255,0.5);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 80vw;
        }
        
        h1 { font-family: 'Dancing Script', cursive; font-size: 3.5rem; color: var(--pink); text-shadow: 2px 2px 0px white; margin: 0; }
        
        #noBtn { 
            position: fixed; z-index: 50; padding: 15px 35px; border-radius: 50px; 
            background: #444; color: white; border: none; cursor: pointer;
            font-weight: bold; font-size: 1.2rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            transition: all 0.1s ease-out;
        }

        #yesBtn { 
            padding: 20px 40px; font-size: 1.8rem; border-radius: 50px; 
            background: var(--pink); color: white; border: none; 
            cursor: pointer; font-weight: 900; 
            box-shadow: 0 10px 25px rgba(255, 77, 109, 0.4);
            transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Message de ColÃ¨re au premier plan */
        #rage-msg { 
            display: none; position: fixed; top: 0; left: 0; 
            width: 100vw; height: 100vh;
            background: rgba(255,0,0,0.8);
            color: white; font-size: 5rem; z-index: 9999; 
            display: flex; justify-content: center; align-items: center;
            text-align: center; font-family: 'Poppins'; font-weight: 900;
            pointer-events: none; /* Laisse passer le clic vers le bouton OUI */
            opacity: 0; transition: opacity 0.3s;
        }

        @keyframes shake { 0% { transform: translate(2px, 2px); } 50% { transform: translate(-5px, -2px); } 100% { transform: translate(2px, 2px); } }
        .angry-mode { animation: shake 0.05s infinite !important; }

        /* Pacte ScellÃ© */
        #pacte { display: none; flex-direction: column; align-items: center; z-index: 2000; color: white; text-align: center; }
        .devil-face { font-size: 120px; animation: laugh 0.4s infinite alternate; }
        @keyframes laugh { from { transform: scale(1) rotate(-5deg); } to { transform: scale(1.3) rotate(5deg); } }
        .hell-title { font-family: 'Creepster', cursive; font-size: clamp(4rem, 10vw, 8rem); color: var(--blood); text-shadow: 0 0 30px #ff0000; margin: 0; }
    </style>
</head>
<body>

    <div id="rage-msg">TU VAS DIRE OUI OU QUOI ??</div>

    <div id="container">
        <h1 id="mainTitle">Veux-tu Ãªtre ma Valentine ?</h1>
        <div style="margin-top: 60px; display: flex; justify-content: center; align-items: center; min-height: 100px;">
            <button id="yesBtn">OUI !</button>
            <button id="noBtn">Non</button>
        </div>
    </div>

    <div id="pacte">
        <div class="devil-face">ðŸ˜ˆ</div>
        <h1 class="hell-title">PACTE SCELLÃ‰</h1>
        <p style="font-size: 2.2rem; color: #ff4d4d;">MOUHAHAHAHAHA !</p>
        <p style="letter-spacing: 2px;">TU M'APPARTIENS DÃ‰SORMAIS.</p>
    </div>

    <script>
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const container = document.getElementById('container');
        const rageMsg = document.getElementById('rage-msg');
        const pacte = document.getElementById('pacte');
        const mainTitle = document.getElementById('mainTitle');
        
        let attempts = 0;

        function spawnDrop(type) {
            const d = document.createElement('div');
            d.className = `drop ${type}`;
            const size = type === 'petal' ? Math.random() * 15 + 10 : Math.random() * 25 + 10;
            d.style.width = size + 'px';
            d.style.height = (type === 'petal' ? size : size * 3) + 'px';
            d.style.left = Math.random() * 100 + 'vw';
            document.body.appendChild(d);
            
            const anim = d.animate([
                { transform: 'translateY(0) rotate(0deg)', opacity: 0.8 },
                { transform: `translateY(110vh) rotate(${type === 'petal' ? 360 : 0}deg)`, opacity: 0 }
            ], { duration: Math.random() * 2000 + 2000 });
            anim.onfinish = () => d.remove();
        }

        let rainInterval = setInterval(() => spawnDrop('petal'), 200);

        const moveNo = () => {
            if (attempts >= 20) return;
            
            attempts++;
            
            // Calculer position pour Ã©viter le bouton OUI
            const yesRect = yesBtn.getBoundingClientRect();
            let newX, newY;
            
            do {
                newX = Math.random() * (window.innerWidth - 150);
                newY = Math.random() * (window.innerHeight - 100);
            } while ( // VÃ©rifie si la nouvelle position chevauche le bouton OUI
                newX < yesRect.right + 50 && 
                newX + 150 > yesRect.left - 50 && 
                newY < yesRect.bottom + 50 && 
                newY + 100 > yesRect.top - 50
            );
            
            noBtn.style.left = newX + 'px';
            noBtn.style.top = newY + 'px';
            
            // Feedback visuel du bouton Non
            noBtn.style.transform = `scale(${1 - attempts/30}) rotate(${attempts * 15}deg)`;
            noBtn.style.backgroundColor = `rgb(${68 + attempts*8}, 68, 68)`;
            
            // Progression du bouton Oui et de l'encart
            const scaleFactor = 1 + (attempts * 0.15);
            yesBtn.style.transform = `scale(${scaleFactor})`;
            container.style.transform = `scale(${1 + (attempts * 0.05)})`;

            // Phase de ColÃ¨re
            if (attempts === 20) {
                document.body.classList.add('angry-mode');
                rageMsg.style.display = 'flex';
                rageMsg.style.opacity = '1';
                noBtn.style.display = 'none';
                mainTitle.innerText = "CLIQUE SUR OUI.";
                mainTitle.style.color = "white";
                container.style.background = "rgba(0,0,0,0.8)";
            }
        };

        noBtn.addEventListener('mouseenter', moveNo);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); });

        yesBtn.addEventListener('click', () => {
            clearInterval(rainInterval);
            document.body.classList.remove('angry-mode');
            document.body.style.background = '#050000';
            container.style.display = 'none';
            rageMsg.style.display = 'none';
            pacte.style.display = 'flex';

            confetti({ particleCount: 400, spread: 150, origin: {y: 0.6}, colors: ['#ff0000', '#000000', '#4a0000'] });

            // Pluie de sang intense
            setInterval(() => spawnDrop('blood'), 40);
        });

        window.onload = () => {
            noBtn.style.left = (window.innerWidth / 2 + 120) + 'px';
            noBtn.style.top = (window.innerHeight / 2) + 'px';
        };
    </script>
</body>
</html>
